{{ define "container" }}
<div class="w-60 center">
  {{ .Content }}

  <form accept-charset="UTF-8" action="{{ .Site.Params.contact_form_submit_url }}" method="POST">
    <div class="form-group">
      <label for="name">Name</label>
      <input type="text" id="name" name="name" autocomplete="name" required class="form-control">
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" id="email" name="email" autocomplete="email" required class="form-control">
    </div>

    <div class="form-group">
      <label for="message">Message</label>
      <textarea id="message" name="message" required class="form-control" rows="10" style="resize: none;"></textarea>
    </div>

    <button type="submit" class="btn btn-default">Submit</button>
  </form>
  <script>
  const form = document.querySelector('form');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    const actionUrl = form.getAttribute('action');

    try {
      const response = await fetch(actionUrl, {
        method: 'POST',
        body: formData,
      });

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();
      console.log(data);
      form.reset();
      document.getElementById('progress').style.display = 'block';

    } catch (error) {
      console.error('An error occurred.', error);
    }
  });
</script>
</div>
{{ end }}